<svg
  xmlns="http://www.w3.org/2000/svg"
  version="1.1"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:svgjs="http://svgjs.com/svgjs"
  viewBox="0 0 500 500"
  width="500"
  height="500"
>
  <g transform="matrix(20.833333333333332,0,0,20.833333333333332,0,0)">
    <path
      d="M23,1.5A1.5,1.5,0,0,0,21.5,0H2.5A1.5,1.5,0,0,0,1,1.5V21a1.479,1.479,0,0,0,.375.983.5.5,0,0,1,.125.331V23a1,1,0,0,0,2,0,.5.5,0,0,1,.5-.5H20a.5.5,0,0,1,.5.5,1,1,0,0,0,2,0v-.686a.5.5,0,0,1,.125-.331A1.479,1.479,0,0,0,23,21Zm-11,19H6.5a1,1,0,0,1,0-2H12a1,1,0,0,1,0,2ZM15.5,16a.5.5,0,0,1-.5.5H4a.5.5,0,0,1-.5-.5V3A.5.5,0,0,1,4,2.5H15a.5.5,0,0,1,.5.5Zm4.75.5a.75.75,0,0,1-1.5,0v-2a.75.75,0,0,1,1.5,0Zm.25-5.25h-2a.75.75,0,0,1,0-1.5h2a.75.75,0,0,1,0,1.5Zm0-3h-2a.75.75,0,0,1,0-1.5h2a.75.75,0,0,1,0,1.5Zm0-3h-2a.75.75,0,0,1,0-1.5h2a.75.75,0,0,1,0,1.5Z"
      fill="red"
      stroke="none"
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="0"
    ></path>
  </g>
</svg>

<form [formGroup]="form" novalidate (ngSubmit)="onSubmit()">
  <mat-form-field class="quantity">
    <mat-label>Quantity</mat-label>
    <input
      matInput
      type="number"
      min="1"
      step="1"
      oninput="validity.valid||(value='');"
      formControlName="quantity"
    />
  </mat-form-field>

  <mat-form-field class="funds">
    <mat-label>Funds</mat-label>
    <input matInput type="number" min="1" formControlName="funds" />
  </mat-form-field>

  <button
    id="purchase"
    mat-flat-button
    color="primary"
    class="purchase"
    [disabled]="purchasing"
  >
    Purchase
  </button>
</form>

<button
  id="resupply"
  mat-flat-button
  color="accent"
  class="resupply"
  (click)="reSupply.emit()"
>
  Resupply
</button>

<!-- This could be a directive or a template to stop the repetition -->
<div class="message">
  <ng-container *ngIf="form.dirty">
    <div class="form-error" *ngIf="form.hasError('insufficentMoney')">
      {{ form.getError('insufficentMoney').message }}
    </div>

    <div class="form-error" *ngIf="form.hasError('outOfStock')">
      {{ form.getError('outOfStock').message }}
    </div>
  </ng-container>

  <div *ngIf="resupply">Resupplied with {{ resupply }} cans</div>
</div>

<div *ngIf="change !== undefined" class="change">
  <ng-container *ngIf="change === 0; else changeTemplate">
    Purchase Success
  </ng-container>
  <ng-template #changeTemplate> Change {{ change | currency }} </ng-template>
</div>

<div class="soda">
  <svg
    *ngFor="let soda of soda"
    xmlns="http://www.w3.org/2000/svg"
    version="1.1"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:svgjs="http://svgjs.com/svgjs"
    viewBox="0 0 24 24"
    width="24"
    height="24"
  >
    <g transform="matrix(1,0,0,1,0,0)">
      <path
        d="M23.121,3,21,.877a1.5,1.5,0,0,0-2.122,0l-.569.569a1,1,0,0,0,.26,1.6l.515.257a.25.25,0,0,1,.126.145l.176.528a1.007,1.007,0,0,0,.632.633l.529.176a.246.246,0,0,1,.144.126l.258.515a1,1,0,0,0,.733.54,1.106,1.106,0,0,0,.162.013,1,1,0,0,0,.707-.292h0l.57-.57a1.5,1.5,0,0,0,0-2.121Z"
        fill="#6ada44"
        stroke="none"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="0"
      ></path>
      <path
        d="M18.648,6.006a10.846,10.846,0,0,0-2.272,3.345.25.25,0,0,1-.406.077l-1.4-1.4A.249.249,0,0,1,14.5,7.8a.252.252,0,0,1,.146-.183,10.8,10.8,0,0,0,3.345-2.272.984.984,0,0,0,.048-1.389,1.009,1.009,0,0,0-1.388,0A9.741,9.741,0,0,1,12.234,6.43l0,0-.1.031A9.678,9.678,0,0,0,7.668,8.9,11.98,11.98,0,0,0,4.9,12.966a5.719,5.719,0,0,1-1.213,1.941A3.284,3.284,0,0,1,2,15.878a2.074,2.074,0,0,0-1.46,1.377A1.89,1.89,0,0,0,.983,19.19l3.825,3.824a1.859,1.859,0,0,0,1.32.547,1.911,1.911,0,0,0,.594-.095,2.1,2.1,0,0,0,1.4-1.488,3.273,3.273,0,0,1,.966-1.667A5.7,5.7,0,0,1,11.032,19.1a11.951,11.951,0,0,0,4.061-2.769,9.68,9.68,0,0,0,2.442-4.464l.03-.1,0-.005a9.752,9.752,0,0,1,2.466-4.417,1.01,1.01,0,0,0,.3-.723.941.941,0,0,0-.3-.664A.985.985,0,0,0,18.648,6.006ZM6.254,18.451a1,1,0,1,1,0-1.415A1,1,0,0,1,6.254,18.451Zm4.6-1.768a1,1,0,1,1,0-1.414A1,1,0,0,1,10.85,16.683Zm1.061-4.6a1,1,0,1,1,0-1.414A1,1,0,0,1,11.911,12.087Z"
        fill="#6ada44"
        stroke="none"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="0"
      ></path>
    </g>
  </svg>
</div>

<div class="cost">
  {{ cost | currency }}
</div>
